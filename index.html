<!DOCTYPE html>
<!--
Created using JS Bin
http://js.jirengu.com

Copyright (c) 2019 by JaronTian (http://js.jirengu.com/xoqej/2/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
<meta name="description" content="jQuery实现的第一个轮播" />
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin</title>
<style id="jsbin-css">
.window{
  width: 300px;
  overflow: hidden;
}
.images{
  display: flex;
  transition: .5s;
}
.red{
  color: red;
}
</style>
</head>
<body>
<div class="window">
  <div class="images" id="images">
    <img src="https://fthmb.tqn.com/0ui_Zw01Ht9NHJkSBlqOIC1IH44=/960x0/filters:no_upscale()/yorkshire-terrier-583788122-581630e85f9b581c0b018a00.jpg" width=300 alt="图片1" height=200>
      <img src="https://canna-pet.com/wp-content/uploads/2017/06/20-longest-living-dog-breeds_canna-pet-e1498599846169.jpg" width=300 alt="" height=200>
      <img src="https://fthmb.tqn.com/0ui_Zw01Ht9NHJkSBlqOIC1IH44=/960x0/filters:no_upscale()/yorkshire-terrier-583788122-581630e85f9b581c0b018a00.jpg" width=300 alt="" height=200>
      <img src="https://canna-pet.com/wp-content/uploads/2017/06/20-longest-living-dog-breeds_canna-pet-e1498599846169.jpg" width=300 alt="" height=200>
  </div>
  <div id="buttons">
    <span>第1张</span>
    <span>第2张</span>
    <span>第3张</span>
    <span>第4张</span>
  </div>
</div>
<script id="jsbin-javascript">
var $allButtons = $('#buttons > span')
for (let i = 0; i < $allButtons.length; i++) {
  $($allButtons[i]).on('click', function(x) {
    var index = $(x.currentTarget).index()
    var p = index * -300
    $('#images').css({
      transform: 'translate(' + p + 'px)'
    })
    $allButtons.eq(index).addClass('red').siblings('.red').removeClass('red') //$allButtons.eq(index) 同 $(x.currentTarget)
  })
}
var n = 0
var size=$allButtons.length
var timerId = setTimer()

$('.window').on('mouseenter', function(){
  clearInterval(timerId)
})
$('.window').on('mouseleave',function(){
  timerId = setTimer()
})

function setTimer(){ // 重复定时函数
  return setInterval(() =>{  // 要有return
 $allButtons.eq(n%size).trigger('click')
  n += 1  
},2000) 
}

</script>
</body>
</html>